{% extends 'base.html' %} {% block title %}Home{% endblock title %} {% block
body %}

<!-- This is the Form -->
<div class="container my-4">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <h2>Add Your Todo's</h2>
      <form action="/" method="POST">
        <div class="mb-3">
          <label for="exampleInputtitle" class="form-label"
            >Enter To-Do Title</label
          >
          <input
            type="text"
            name="title"
            class="form-control"
            id="exampleInputtitle"
            aria-describedby="emailHelp"
          />
        </div>
        <div class="mb-3">
          <label for="exampleInputdesc" class="form-label"
            >Enter Description</label
          >
          <input
            type="text"
            name="desc"
            class="form-control"
            id="exampleInputdesc"
          />
        </div>
        <button type="submit" class="btn btn-success">Add Todo</button>
      </form>
    </div>
  </div>
</div>

<!-- This is the Table -->
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <h2>Your Todo's</h2>
      {% if incomplete_todos|length == 0 %}
      <div class="alert alert-danger" role="alert">
        There are No To-Do's. Add a Todo!
      </div>

      {% else %}
      <table class="table">
        <thead>
          <tr>
            <th scope="col">SNo.</th>
            <th scope="col">Title</th>
            <th scope="col">Description</th>
            <th scope="col">Created on</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for todo in incomplete_todos %}
          <tr>
            <th scope="row">{{ loop.index }}</th>
            <td>{{ todo.title }}</td>
            <td>{{ todo.desc }}</td>
            <td>
              {{(todo.date | to_ist ).strftime('%Y-%m-%d @ %I:%M:%S %p')}}
            </td>
            <td class="col justify-content-center">
              <a
                href="/done/{{todo.sno}}"
                type="button"
                class="btn btn-success my-1"
                >Done
              </a>
              <a
                href="/update/{{todo.sno}}"
                type="button"
                class="btn btn-warning mx-2"
                >Update</a
              >
              <a
                href="/delete/{{todo.sno}}"
                type="button"
                class="btn btn-danger"
                >Delete
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% endif %}
    </div>
    
    <div class="container my-4">
      <div class="row justify-content-center">
        <div class="col-md-10">
      <h2>Completed Todos</h2>
      {% if completed_todos|length == 0 %}
      <div class="alert alert-danger" role="alert">
        There are No Completed To-Do's. Complete a Todo Fast!
      </div>
      {% else %}
      <table class="table">
        <thead>
          <tr>
            <th scope="col">SNo.</th>
            <th scope="col">Title</th>
            <th scope="col">Description</th>
            <th scope="col">Completed on</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for todo in completed_todos %}
          <tr>
            <th scope="row">{{ loop.index }}</th>
            <td>{{ todo.title }}</td>
            <td>{{ todo.desc }}</td>
            <td>{{ (todo.date | to_ist).strftime('%Y-%m-%d @ %I:%M:%S %p') }}</td>
            <td>
                <!-- You might want a different action here, like "Undo" or just "Delete" -->
                <a href="/delete/{{todo.sno}}" role="button" class="btn btn-danger mx-2">Delete</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% endif %}
      </div>
      </div>
    </div>
  </div>
</div>

{% endblock body %}
